#!/bin/bash

# This script will restart the pulseaudio sound system, speech-dispatcher and either 
# Orca or Speakup, depending whether you are in the console or a GUI session.
# If you run this in the GUI, you will then have to run it in the console again
# if you want to use speakup. But running it in the console won't stop Orca.
# Written by tony sales (aka drbongo)and Rob Whyte (aka fudge).

if [ "$TERM" == "linux" ]; then # Check to see whether you are in a console session

# If you are in a console session restart pulseaudio, speech-dispatcher and speechd-up (speakup)

espeak "Generated message, Restarting audio system. Please enter your password" 

sudo /etc/init.d/pulseaudio restart

sudo killall -9 speech-dispatcher

espeak "Audio system restarted - now restarting speeched up" 

sudo /etc/init.d/speechd-up restart

else # if you are not in a console restart  pulseaudio, speech-dispatcher and orca

espeak "Generated message, Restarting audio system. Please enter your password" 

gksudo /etc/init.d/pulseaudio restart 

sudo killall -9 speech-dispatcher

espeak "Audio system restarted,  now restarting orca" 

orca --replace

fi

exit


