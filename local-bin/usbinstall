#!/bin/bash

# A prototype script to install an iso image to a usb pendrive using
# unetbootin as the backend.

# choose iso file
iso=`zenity --file-selection --title "Select an ISO file..."`

# choose USB drive
target=`zenity --entry --text "Type path to USB drive e.g. /dev/sdb1..." --entry-text "/dev/sd"`

# choose persistent size
persistent=`zenity --entry --text "Type size of persistent storage 0-9999..." --entry-text "9999"`

# choose alarm time
timer=`zenity --entry --text "Type length of timer in seconds..." --entry-text "1200"`

# notify the user that installation is starting
espeak "The ISO is being installed to the pendrive..."

# notify user process has probably finished
(sleep $timer && zenity --info --text "Finished installing ISO to USB, press Enter to exit" && killall unetbootin) &

# install to usb
unetbootin method=diskimage isofile=$iso installtype=USB targetdrive=$target persistentspace=$persistent autoinstall=yes

exit=0
